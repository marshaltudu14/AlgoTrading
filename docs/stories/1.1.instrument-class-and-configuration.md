Status: Draft

Story:
  **As a** developer,
  **I want** to define and manage instrument-specific properties (symbol, type, lot_size, tick_size) in a structured way,
  **so that** the backtesting engine and trading environment can correctly handle different asset types, including options.

Acceptance Criteria:
1.  **1.1.1:** A new Python class named `Instrument` shall be created in `src/config/` (or a suitable new `src/instruments/` directory if preferred) with attributes for `symbol` (str), `type` (str, e.g., "STOCK", "OPTION"), `lot_size` (int), and `tick_size` (float).
2.  **1.1.2:** An `instruments.yaml` file already exists in the `config/` directory and serves as a centralized registry for all tradable instruments, defining their properties (symbol, type, lot_size, tick_size).
3.  **1.1.3:** A utility function or class method shall be implemented to load the `instruments.yaml` file at startup and parse its contents into a dictionary of `Instrument` objects, accessible by their symbol.
4.  **1.1.4:** The `Instrument` object (or relevant properties from it) shall be passed to the `TradingEnv` and `BacktestingEngine` during their initialization or relevant method calls, allowing them to access instrument-specific data.

Tasks / Subtasks:
- [ ] Create `Instrument` class in `src/config/instrument.py` with specified attributes (AC: 1.1.1)
- [ ] Implement utility function/class in `src/utils/instrument_loader.py` to load `instruments.yaml` and parse into `Instrument` objects (AC: 1.1.3)
- [ ] Modify `TradingEnv` and `BacktestingEngine` to accept and utilize `Instrument` objects (AC: 1.1.4)

Dev Notes:
- **Instrument Class Location:** As per architectural recommendation, the `Instrument` class should be placed in `src/config/instrument.py` to keep it logically grouped with its configuration (`instruments.yaml`). The loading utility should reside in `src/utils/instrument_loader.py`.
- **Data Storage:** For processed data, Parquet is the recommended format for faster processing and training. Raw data will remain in CSV.
- **Options Proxy:** The options proxy model as described in `docs/analysis_and_planning.md` will be used for options simulation. This involves calculating trade cost based on `proxy_premium * quantity * lot_size` and P&L based on intrinsic value with capped loss.

Testing:
- Test file location: `tests/test_config/test_instrument.py` and `tests/test_utils/test_instrument_loader.py`
- Test standards: Follow existing project testing conventions.
- Testing frameworks and patterns to use: `pytest` for unit tests.
- Any specific testing requirements for this story:
    - Verify `Instrument` class instantiation with correct attributes.
    - Verify `instruments.yaml` loading and correct parsing into `Instrument` objects.
    - Verify `TradingEnv` and `BacktestingEngine` can correctly access and use instrument properties.

Change Log:
| Date       | Version | Description        | Author |
|------------|---------|--------------------|--------|
| 2025-07-20 | 1.0     | Initial story draft | Bob    |

Dev Agent Record:
  Agent Model Used:
  Debug Log References:
  Completion Notes List:
  File List:

QA Results:
