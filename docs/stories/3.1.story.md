---
id: story-template-v2
name: Story Document
version: 2.0
---

# Story 3.1: Specialized Trading Agents

## Status
Draft

## Story
**As an** RL engineer,
**I want** to implement specialized trading agents (e.g., Trend Following, Mean Reversion, Volatility, Consolidation),
**so that** the MoE framework can leverage diverse strategies tailored to specific market conditions.

## Acceptance Criteria
1. `src/agents/trend_agent.py`, `src/agents/mean_reversion_agent.py`, `src/agents/volatility_agent.py`, and `src/agents/consolidation_agent.py` are created.
2. Each specialized agent class inherits from `BaseAgent` (from Story 2.1).
3. Each specialized agent utilizes an `LSTMModel` (or other appropriate `src/models` architecture) for its policy and value networks.
4. Each agent's `learn` method is designed to be trainable on specific market conditions (though the actual specialized training data filtering will be handled by the `Trainer` in a later story).
5. Each agent's `select_action` method outputs the same discrete trading actions (`BUY_LONG`, `SELL_SHORT`, `CLOSE_LONG`, `CLOSE_SHORT`, `HOLD`).

## Tasks / Subtasks
- [ ] Task 1 (AC: 1, 2, 3, 5): Create the specialized agent classes.
    - [ ] Subtask 1.1: Create the files `src/agents/trend_agent.py`, `src/agents/mean_reversion_agent.py`, `src/agents/volatility_agent.py`, and `src/agents/consolidation_agent.py`.
    - [ ] Subtask 1.2: In each file, define a class (e.g., `TrendAgent`) that inherits from `BaseAgent`.
    - [ ] Subtask 1.3: Implement the `__init__` method for each agent to initialize an `LSTMModel`.
    - [ ] Subtask 1.4: Implement the `select_action` method for each agent.
- [ ] Task 2 (AC: 4): Implement the `learn` method for each specialized agent.
    - [ ] Subtask 2.1: Implement a placeholder `learn` method for each agent. The actual training logic will be refined in a later story.
- [ ] Task 3: Write unit tests for the specialized agents.
    - [ ] Subtask 3.1: Add test cases to `tests/test_agents.py`.
    - [ ] Subtask 3.2: For each specialized agent, write a test case to verify that it can be initialized and that `select_action` returns a valid action.

## Dev Notes
- **File Locations**: `src/agents/trend_agent.py`, `src/agents/mean_reversion_agent.py`, `src/agents/volatility_agent.py`, `src/agents/consolidation_agent.py` [Source: `docs/architecture/source-tree.md#6-source-directory-src`]
- **Base Class**: `BaseAgent`
- **Responsibilities**: These classes represent the "experts" in the MoE framework. Each one will eventually be trained to specialize in a different market regime. [Source: `docs/architecture/rl-model-architecture-detailed.md#1-srcagents---specialized-trading-agents`]

### Testing
- Unit tests should be added to the existing `tests/test_agents.py` file.
- Tests should focus on the basic functionality of the agents, as their specialized behavior will be developed later.

## QA Results
